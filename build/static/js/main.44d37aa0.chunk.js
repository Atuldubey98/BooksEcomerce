(this.webpackJsonpecom_books=this.webpackJsonpecom_books||[]).push([[0],{126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},130:function(e,t,c){},140:function(e,t,c){},142:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},147:function(e,t,c){},148:function(e,t,c){},149:function(e,t,c){},154:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),s=c(15),i=c.n(s),o=(c(126),c(7)),r=(c(127),c(128),c(207)),l=c(192),j=c(193),d=c(194),b=c(212),u=c(213),h=c(195),O=c(25);c(80),c(92),c(155);O.a.apps.length?O.a.app():O.a.initializeApp({apiKey:"AIzaSyDTrOyNC5qTXeBzGQYovXGrpwYUIKkxC_0",authDomain:"ecom-books.firebaseapp.com",projectId:"ecom-books",storageBucket:"ecom-books.appspot.com",messagingSenderId:"294495034922",appId:"1:294495034922:web:3250cb251567d712406d53",measurementId:'G-K2EFV6FZRK"'});var m={db:O.a.firestore(),auth:O.a.auth(),storage:O.a.storage()},x=(c(130),c(188)),p=n.a.createContext(),f=c(191),g=c(2),v=function(e){var t=Object(a.useState)({}),c=Object(o.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(!0),r=Object(o.a)(i,2),l=r[0],j=r[1],d=Object(a.useContext)(p),b=m.db.collection("userbooks").doc(d.email),u=m.storage;Object(a.useEffect)((function(){return m.db.collection("books").doc(e.book).get().then((function(e){s(e.data()),j(!1)})),function(){s({})}}),[e.book]);return!l&&Object(g.jsxs)("div",{className:"mybook",children:[Object(g.jsx)("img",{src:n.img,alt:e.book}),Object(g.jsxs)("div",{className:"mybook__field",children:[Object(g.jsxs)("p",{className:"mybook__name",children:[Object(g.jsx)("strong",{children:"Book Name :"}),n.name]}),Object(g.jsxs)("p",{className:"mybook__price",children:[Object(g.jsx)("strong",{children:"Book Price :"}),n.price]}),Object(g.jsxs)("p",{className:"mybook__price",children:[Object(g.jsx)("strong",{children:"Book Categary :"}),n.category]}),Object(g.jsxs)("p",{className:"mybook__price",children:[Object(g.jsx)("strong",{children:"Book Type:"}),n.type]})]}),l?Object(g.jsx)(x.a,{color:"secondary"}):Object(g.jsx)("button",{onClick:function(){j(!0),m.db.collection("books").doc(e.book).delete().then((function(){b.update({books:O.a.firestore.FieldValue.arrayRemove(e.book)}).then((function(){u.refFromURL(n.img).delete().then((function(){console.log("File Deleted Successfully"),j(!1)})).catch((function(e){console.log(e),j(!1)}))}))})).catch((function(e){console.log(e),j(!1)}))},children:"Delete"}),Object(g.jsx)(f.a,{})]})},k=c(81),y=c.n(k),_=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1];return[c,function(e){n(e)}]},N=function(e){var t={display:"block",margin:"0 auto"},c=Object(a.useContext)(p),s=n.a.useState(!0),i=Object(o.a)(s,2),x=i[0],f=i[1],k=_(),N=Object(o.a)(k,2),S=N[0],C=N[1],A=n.a.useState(""),F=Object(o.a)(A,2),I=F[0],B=F[1],E=n.a.useState(""),w=Object(o.a)(E,2),D=w[0],T=w[1],R=n.a.useState(0),L=Object(o.a)(R,2),P=L[0],W=L[1],U=n.a.useState(""),z=Object(o.a)(U,2),M=z[0],K=z[1],V=n.a.useState(""),q=Object(o.a)(V,2),H=q[0],J=q[1],Y=n.a.useState(""),G=Object(o.a)(Y,2),Q=G[0],X=G[1],Z=n.a.useState(""),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ce=n.a.useState([]),ae=Object(o.a)(ce,2),ne=ae[0],se=ae[1],ie=m.db.collection("books"),oe=m.db.collection("userbooks").doc(c.email),re=m.storage.ref(),le=function(){return Object(g.jsx)("div",{className:"body__myAccountImage",children:Object(g.jsx)("img",{src:URL.createObjectURL(ee),alt:ee.name})})},je=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(5)}}}}))();return Object(a.useEffect)((function(){var e=m.db.collection("userbooks").doc(c.email).onSnapshot((function(e){e.exists?(se(e.data().books),f(!1)):f(!1)}));return function(){e()}}),[c.email]),Object(g.jsxs)("div",{className:"body__myAccount",children:[Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)(j.a,{maxWidth:"lg",children:[Object(g.jsx)("h1",{children:"Add Books"}),Object(g.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),""!==I&&""!==Q&&""!==M&&""!==D&&0!==P&&""!==H)?(f(!0),re.child(ee.name).put(ee).then((function(e){e.ref.getDownloadURL().then((function(e){var t={name:I,type:Q,category:M,description:D,price:Number(P),author:H,img:e};ie.add(t).then((function(e){ne.length>0?oe.update({books:O.a.firestore.FieldValue.arrayUnion(e.id)}).then((function(e){console.log("Document is update")})):oe.set({books:[e.id]}).then((function(e){console.log("Document Setted")}))})),f(!1)}))}))):C("Please specify more data for The Book");B(""),te(""),W(0),T(""),X(""),J(""),K("")},className:je.root,noValidate:!0,autoComplete:"off",children:[Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"name",children:"Name"}),Object(g.jsx)(u.a,{id:"name",value:I,onChange:function(e){return B(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Name Of The Book"})]}),Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"description",children:"Description"}),Object(g.jsx)(u.a,{type:"text",id:"description",value:D,onChange:function(e){return T(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Description For the Book"})]}),Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"price",children:"Price"}),Object(g.jsx)(u.a,{type:"number",id:"price",value:P,onChange:function(e){return W(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Price For the Book"})]}),Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"author",children:"Author"}),Object(g.jsx)(u.a,{type:"text",id:"author",value:H,onChange:function(e){return J(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Author For the Book"})]}),Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"type",children:"Type"}),Object(g.jsx)(u.a,{type:"text",id:"type",value:Q,onChange:function(e){return X(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Type For the Book"})]}),Object(g.jsxs)(d.a,{variant:"outlined",children:[Object(g.jsx)(b.a,{htmlFor:"category",children:"Category"}),Object(g.jsx)(u.a,{type:"text",id:"category",value:M,onChange:function(e){return K(e.target.value)},label:"Name"}),Object(g.jsx)(h.a,{id:"component-helper-text",children:"Category For the Book"})]}),Object(g.jsx)("label",{htmlFor:"file",children:"Choose a file : "}),Object(g.jsx)("input",{type:"file",id:"file",className:"inputfile",name:"file",onChange:function(e){te(e.target.files[0])}}),ee&&Object(g.jsx)(le,{}),Object(g.jsx)("div",{children:x?Object(g.jsx)(y.a,{loading:x,css:t,size:150}):Object(g.jsx)("button",{id:"smt-button",type:"submit",children:"Submit"})}),S&&Object(g.jsx)(r.a,{severity:"error",children:S})]})]})}),Object(g.jsx)("div",{className:"body__myAccountMyBooks",children:Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)(j.a,{maxWidth:"lg",children:[Object(g.jsx)("h1",{children:"My Books"}),x?Object(g.jsx)(y.a,{loading:x,css:t,size:150}):ne.length<=0?Object(g.jsx)("p",{children:"No Books"}):ne.map((function(e){return Object(g.jsx)(v,{book:e},e)}))]})})})]})},S=c(14),C=(c(140),c(56)),A=c.n(C),F=function(e){var t=Object(S.h)().bookId,c=Object(a.useState)({}),n=Object(o.a)(c,2),s=n[0],i=n[1],r=Object(a.useState)(!0),l=Object(o.a)(r,2),j=l[0],d=l[1];Object(a.useEffect)((function(){m.db.collection("books").doc(t).get().then((function(e){i(e.data()),d(!1)})).catch((function(e){console.log(e)}))}),[t]);return j?Object(g.jsx)(A.a,{color:"black",css:{display:"flex",margin:"auto"},loading:j,size:150}):Object(g.jsxs)("div",{className:"bookdescription",children:[Object(g.jsxs)("div",{className:"bookdescription__title",children:[Object(g.jsx)("img",{src:s.img,alt:t}),Object(g.jsx)("h1",{children:s.name})]}),Object(g.jsxs)("h3",{children:["Author : ",s.author]}),Object(g.jsx)("p",{children:s.description}),Object(g.jsxs)("h3",{children:["Price : ",s.price]}),Object(g.jsxs)("h3",{children:["Type : ",s.type]}),Object(g.jsxs)("h3",{children:["Categary :",s.category]})]})},I=(c(142),c(84)),B=c.n(I),E=c(98),w=c.n(E),D=c(198),T=c(197),R=function(e){var t=Object(S.g)();return{logOut:function(){m.auth.signOut().then((function(){localStorage.removeItem("user"),e(),t.replace("/sign")})).catch((function(e){console.log(e)}))}}},L=c(99),P=c.n(L),W=Object(l.a)((function(e){return{small:{width:e.spacing(4),height:e.spacing(4)},root:{display:"flex"},paper:{marginRight:e.spacing(2)}}})),U=function(e){var t=Object(S.g)(),c=R(e.handleAuth).logOut,s=W(),i=Object(a.useContext)(p),r=function(e){c()},l=n.a.useState(!1),j=Object(o.a)(l,2),d=j[0],b=j[1];return Object(g.jsxs)("div",{className:"nav__master",children:[Object(g.jsxs)("div",{className:"nav",children:[Object(g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Closed_Book_Icon.svg/1200px-Closed_Book_Icon.svg.png",alt:"book"}),!e.isCart&&Object(g.jsx)("input",{placeholder:"Enter a book to search",value:e.search,onChange:e.handleSearch,type:"text",className:"nav__search"}),Object(g.jsx)(T.a,{id:"displayNav",onClick:function(){b((function(e){return!e}))},children:Object(g.jsx)(D.a,{color:"secondary",badgeContent:e.cartLength,children:Object(g.jsx)(B.a,{fontSize:"small",className:s.small})})}),Object(g.jsxs)("div",{className:"nav__links",children:[Object(g.jsx)("div",{className:"nav__linksButton",children:Object(g.jsx)(T.a,{onClick:function(){t.push("/")},children:Object(g.jsx)(w.a,{fontSize:"small",className:s.small})})}),Object(g.jsx)("div",{className:"nav__linksButton",children:Object(g.jsx)(T.a,{onClick:function(){t.push("/cart")},children:Object(g.jsx)(D.a,{fontSize:"large",color:"secondary",badgeContent:e.cartLength,children:Object(g.jsx)(B.a,{fontSize:"small",className:s.small})})})}),Object(g.jsx)("div",{className:"nav__linksButton",children:Object(g.jsx)(T.a,{onClick:function(){t.push("/myaccount")},children:Object(g.jsx)(P.a,{fontSize:"small",className:s.small})})}),Object(g.jsxs)("div",{className:"nav__linksButton",children:[Object(g.jsx)("span",{className:"nav__linksEmail",children:i.displayName?i.displayName:i.email}),Object(g.jsx)("div",{onClick:r,className:"nav__linksLogout",children:"Logout"})]})]})]}),d&&Object(g.jsx)("div",{className:"nav__linksMobileIcon",children:Object(g.jsxs)("ul",{className:"nav__linksMobileList",children:[Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"/",children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"/myaccount",children:"My Books"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"/cart",children:"Cart"})}),Object(g.jsx)("li",{onClick:r,children:"Logout"})]})})]})},z=c(103),M=(c(144),c(145),c(31)),K=c(199),V=n.a.forwardRef((function(e,t){return Object(g.jsxs)("div",{ref:t,className:"book",children:[Object(g.jsx)(M.b,{to:{pathname:"/product/".concat(e.book.id)},children:Object(g.jsxs)("div",{className:"book__container",children:[Object(g.jsx)("img",{src:e.book.book.img,alt:""}),Object(g.jsxs)("div",{className:"book__containerDesc",children:[Object(g.jsx)("h3",{children:e.book.book.name}),Object(g.jsxs)("h3",{className:"book__containerDescAuthor author",children:["By: ",e.book.book.author]}),Object(g.jsxs)("h3",{className:"book__containerDescPrice",children:["Cost: Rs ",e.book.book.price]})]})]})}),Object(g.jsxs)("div",{className:"book__button",children:[Object(g.jsx)(K.a,{color:"primary",variant:"contained",className:"book__buttonAdd",onClick:function(){e.action({type:"ADD_TO_BASKET",payload:{price:e.book.book.price,id:e.book.id}}),e.isAdded(!0),e.handleClick()},children:"Add"}),Object(g.jsx)(K.a,{color:"secondary",variant:"contained",className:"book__buttonRemove",onClick:function(){e.action({type:"REMOVE_FROM_BASKET",payload:{price:e.book.book.price,id:e.book.id}}),e.isAdded(!1),e.handleClick()},children:"Remove"})]})]})})),q=c(210),H=function(e){var t=n.a.createRef(),c=n.a.useState(""),s=Object(o.a)(c,2),i=s[0],l=s[1],j=n.a.useState([]),d=Object(o.a)(j,2),b=d[0],u=d[1],h=n.a.useState([]),O=Object(o.a)(h,2),x=O[0],p=O[1],f=n.a.useState(!0),v=Object(o.a)(f,2),k=v[0],y=v[1],_=n.a.useState(!1),N=Object(o.a)(_,2),S=N[0],C=N[1],F=n.a.useState(!0),I=Object(o.a)(F,2),B=I[0],E=I[1],w=function(){C(!0)},D=function(e,t){"clickaway"!==t&&C(!1)};return Object(a.useEffect)((function(){m.db.collection("books").get().then((function(e){p(e.docs.map((function(e){return{id:e.id,book:e.data()}}))),u(Object(z.a)(new Map(e.docs.map((function(e){return[e.data().category,e.data()]}))).values())),y(!1)}))}),[]),k?Object(g.jsx)(A.a,{color:"black",css:{display:"flex",margin:"auto"},loading:k,size:150}):Object(g.jsxs)("div",{className:"body",children:[Object(g.jsx)(q.a,{open:S,autoHideDuration:6e3,onClose:D,children:Object(g.jsx)(r.a,{ref:t,elevation:6,variant:"filled",onClose:D,severity:B?"success":"error",children:B?"Added to Basket":"Removed From Basket"})}),Object(g.jsx)("div",{className:"body__filter",children:Object(g.jsxs)("div",{className:"body__filterCategory",children:[Object(g.jsx)("label",{htmlFor:"category",children:"Category : "}),Object(g.jsxs)("select",{id:"category",value:i,onChange:function(e){l(e.target.value)},children:[Object(g.jsx)("option",{value:"",children:"All"},0),b.map((function(e,t){return Object(g.jsx)("option",{className:"category__option",value:e.category,children:e.category},t+1)}))]})]})}),Object(g.jsx)("div",{className:"body__normalBody",children:""===i?x.map((function(t){return t.book.name.includes(e.search)&&Object(g.jsx)(V,{isAdded:E,book:t,handleClick:w,action:e.dispatch},t.id)})):x.map((function(t){return i===t.book.category&&Object(g.jsx)(V,{isAdded:E,handleClick:w,book:t,action:e.dispatch},t.id)}))})]})},J=c(44),Y=function(e){var t=Object(a.useReducer)((function(t,c){console.log(e.email);var a=m.db.collection("cart").doc(e.email);switch(c.type){case"ADD_TO_BASKET":return a.get().then((function(e){if(e.exists){var t=e.data(),n=!0;t.products.forEach((function(e,a){if(e.item===c.payload.id){var s=e.count+1;t.products[a].count=s,n=!1}})),n&&t.products.push({count:1,item:c.payload.id,price:c.payload.price}),a.set(t)}else a.set({products:[{item:c.payload.id,count:1,price:c.payload.price}]})})),Object(J.a)({},t);case"REMOVE_FROM_BASKET":return a.get().then((function(e){if(e.exists){var t=e.data(),n=function(e,t){var c=-1;return e.forEach((function(e,a){if(e.item===t)return c=a})),c}(t.products,c.payload.id);n>-1&&(t.products[n].count>1?t.products[n].count=t.products[n].count-1:t.products.splice(n,1))}a.set(t)})),Object(J.a)({},t);default:return Object(J.a)({},t)}}),{basket:[],basketLength:0}),c=Object(o.a)(t,2);return{state:c[0],dispatch:c[1]}},G=function(e){var t=Object(a.useState)(""),c=Object(o.a)(t,2),n=c[0],s=c[1];return{search:n,handleSearch:Object(a.useCallback)((function(e){s(e.target.value)}),[s])}},Q=c(211),X=c(201),Z=c(205),$=c(202),ee=c(208),te=c(200),ce=c(203),ae=c(206),ne=c(73),se=c.n(ne),ie=c(85);var oe=function(){return Object(g.jsxs)(ie.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(g.jsx)(te.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})};var re=function(e){var t=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));console.log("Mounting");var c=t(),n=Object(a.useState)(""),s=Object(o.a)(n,2),i=s[0],d=s[1],b=Object(a.useState)(""),u=Object(o.a)(b,2),h=u[0],O=u[1],p=Object(a.useState)(!1),f=Object(o.a)(p,2),v=f[0],k=f[1],y=Object(a.useState)({}),_=Object(o.a)(y,2),N=_[0],C=_[1],A=Object(a.useState)(!1),F=Object(o.a)(A,2),I=F[0],B=F[1],E=Object(S.g)();return Object(g.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(X.a,{}),Object(g.jsxs)("div",{className:c.paper,children:[Object(g.jsx)(Q.a,{className:c.avatar,children:Object(g.jsx)(se.a,{})}),Object(g.jsx)(ie.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(g.jsxs)("form",{onSubmit:function(t){B(!0),t.preventDefault(),m.auth.signInWithEmailAndPassword(i,h).then((function(t){localStorage.setItem("user",JSON.stringify({email:t.user.email,uid:t.user.uid,refreshToken:t.user.refreshToken})),B(!1),e.setUser(t.user),E.replace("/"),e.handleAuth()})).catch((function(e){C(e),B(!1)}))},className:c.form,noValidate:!0,children:[Object(g.jsx)(Z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:i,autoComplete:"email",onChange:function(e){return d(e.target.value)},autoFocus:!0}),Object(g.jsx)(Z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:h,onChange:function(e){return O(e.target.value)},autoComplete:"current-password"}),Object(g.jsx)($.a,{control:Object(g.jsx)(ee.a,{value:v,onChange:function(e){return k(!v)},color:"primary"}),label:"Remember me"}),I?Object(g.jsx)(x.a,{}):Object(g.jsx)(K.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,children:"Sign In"}),Object(g.jsxs)(ce.a,{container:!0,children:[Object(g.jsx)(ce.a,{item:!0,xs:!0,children:Object(g.jsx)(te.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(g.jsx)(ce.a,{item:!0,children:Object(g.jsx)(te.a,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),0!==Object.keys(N).length&&Object(g.jsx)(r.a,{severity:"error",children:N.message}),Object(g.jsx)(ae.a,{mt:8,children:Object(g.jsx)(oe,{})})]})},le=(c(146),function(e){var t=Object(a.useContext)(p),c=Object(a.useState)({}),s=Object(o.a)(c,2),i=s[0],r=s[1],l=Object(a.useState)(!1),j=Object(o.a)(l,2),d=j[0],b=j[1],u=e.cartitem,h=n.a.createRef();Object(a.useEffect)((function(){var e=m.db.collection("books").doc(u.item.toString()).onSnapshot((function(e){e.exists&&(r(e.data()),b(!1))}));return function(){e()}}),[u]);var O=Y(t).dispatch;return Object(g.jsxs)("div",{ref:h,className:"cartitem",children:[d?Object(g.jsx)("img",{alt:"loading",src:"https://media3.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif"}):Object(g.jsx)(M.b,{to:{pathname:"/product/".concat(u.item.toString())},children:Object(g.jsx)("img",{alt:i.price,src:i.img})}),Object(g.jsxs)("div",{className:"cartitem__details",children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Price : "}),i.price," "]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Quantity : "}),e.cartitem.count]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Subtotal : "}),i.price&&(parseFloat(u.count)*parseFloat(i.price)).toFixed(2)]})]}),Object(g.jsx)(K.a,{color:"secondary",variant:"contained",onClick:function(){return O({type:"REMOVE_FROM_BASKET",payload:{price:i.price,id:e.cartitem.item.toString()}})},children:"Remove"})]})}),je=c(204),de=c(100),be=c.n(de),ue=c(101),he=c.n(ue),Oe=(c(147),function(e){var t=Object(S.g)(),c=Object(a.useRef)(),s=Object(a.useState)(0),i=Object(o.a)(s,2),l=i[0],j=i[1],d=Object(a.useContext)(p),b=Object(a.useState)({}),u=Object(o.a)(b,2),h=u[0],O=u[1],x=Object(a.useState)(0),v=Object(o.a)(x,2),k=v[0],y=v[1],_=n.a.useState(!0),N=Object(o.a)(_,2),C=N[0],F=N[1],I=n.a.useState(""),B=Object(o.a)(I,2),E=B[0],w=B[1];Object(a.useEffect)((function(){var e=m.db.collection("cart").doc(d.email).onSnapshot((function(e){if(e.exists){var t=0;O(e.data()),e.data().products.length<=0&&w("No Items in the Cart !"),e.data().products.forEach((function(e,c){t+=e.price*e.count})),y(t),F(!1)}else w("No Items in the Cart !"),F(!1)}));return function(){j(0),e(),y(0)}}),[d.email]);var D=function(e){l+e<c.current.offsetWidth&&(c.current.scrollBy(e,0),j((function(t){return t+e})))};return C?Object(g.jsx)(A.a,{color:"black",css:{display:"flex",margin:"auto"},loading:C,size:150}):Object(g.jsxs)("div",{className:"cart",children:[Object(g.jsx)(U,{isCart:e.isCart,basket:e.basket,cartLength:e.cartLength,search:e.search,handleAuth:e.handleAuth,handleSearch:e.handleSearch}),Object(g.jsxs)(n.a.Fragment,{children:[E?Object(g.jsxs)(r.a,{severity:"info",children:[Object(g.jsx)(je.a,{children:"Add Item to Cart"}),E]}):Object(g.jsx)("div",{ref:c,className:"cart__books",children:void 0!==h.products&&h.products.map((function(e){return Object(g.jsx)(le,{cartitem:e},e.item)}))}),Object(g.jsx)(f.a,{}),Object(g.jsxs)("div",{className:"cart__placeOrder",children:[Object(g.jsx)(T.a,{onClick:function(){return D(-100)},children:Object(g.jsx)(be.a,{})}),Object(g.jsxs)("h1",{children:["Total : ",k&&k.toFixed(2)]}),Object(g.jsx)("button",{onClick:function(){t.push("/checkout")},className:(h.products?h.products.length:0)>0?"cart__placeOrderEnabled":"cart__placeOrderDisabled",children:"Checkout"}),Object(g.jsx)(T.a,{onClick:function(){return D(100)},children:Object(g.jsx)(he.a,{})})]})]})]})}),me=(c(148),c(149),function(e){e.index;var t=e.checkoutItem,c=Object(a.useState)({}),n=Object(o.a)(c,2),s=n[0],i=n[1];return Object(a.useEffect)((function(){m.db.collection("books").doc(t.item).get().then((function(e){i(e.data())}))}),[t]),Object(g.jsxs)("div",{className:"checkout__item",children:[Object(g.jsx)("img",{alt:s.name,src:s.img}),Object(g.jsxs)("div",{className:"checkout__itemInfo",children:[Object(g.jsxs)("div",{className:"checkout__itemInfoData",children:[Object(g.jsx)("span",{className:"checkout__itemInfoHeading",children:"Name :  "}),Object(g.jsx)("span",{children:s.name})]}),Object(g.jsxs)("div",{className:"checkout__itemInfoData",children:[Object(g.jsx)("span",{className:"checkout__itemInfoHeading",children:"Price :  "}),Object(g.jsx)("span",{children:t.price})]}),Object(g.jsxs)("div",{className:"checkout__itemInfoData",children:[Object(g.jsx)("span",{className:"checkout__itemInfoHeading",children:"Quantity :  "}),Object(g.jsx)("span",{children:t.count})]})]})]})}),xe=c(72),pe=function(e){var t=Object(a.useState)({}),c=Object(o.a)(t,2),n=c[0],s=c[1];return{input:n,handleSubmit:function(t){t&&t.preventDefault(),e()},handleInputChange:function(e){e.persist(),s((function(t){return Object(J.a)(Object(J.a)({},t),{},Object(xe.a)({},e.target.name,e.target.value))}))}}},fe=function(e){var t=e.cart,c=Object(a.useState)(0),n=Object(o.a)(c,2),s=n[0],i=n[1];Object(a.useEffect)((function(){var e=0;t.forEach((function(t){e+=t.price*t.count})),i(e)}),[t]);var r=pe((function(){})),l=(r.input,r.handleSubmit),j=r.handleInputChange;return Object(g.jsxs)("div",{className:"checkout",children:[Object(g.jsx)("h1",{children:"Checkout"}),Object(g.jsx)("h3",{children:"Check the below items"}),Object(g.jsx)(M.b,{to:{pathname:"/cart"},children:"Click here to change the cart"}),Object(g.jsx)("div",{className:"checkout__items",children:t.map((function(e,t){return Object(g.jsx)(D.a,{color:"secondary",badgeContent:e.count,children:Object(g.jsx)(me,{index:t,checkoutItem:e})},e.item)}))}),Object(g.jsx)("div",{className:"checkout__total",children:Object(g.jsxs)("h1",{children:[Object(g.jsx)("strong",{children:"Total : "})," ",null===s||void 0===s?void 0:s.toFixed(2)]})}),Object(g.jsx)("div",{className:"checkout__shipping",children:Object(g.jsxs)("form",{onSubmit:l,className:"form__shipping",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name :"}),Object(g.jsx)("input",{placeholder:"Name",onChange:j,name:"name",type:"text"}),Object(g.jsx)("label",{htmlFor:"address1",children:"Address Line 1 :"}),Object(g.jsx)("input",{placeholder:"Address Line 1",onChange:j,name:"address1",type:"text"}),Object(g.jsx)("label",{htmlFor:"address2",children:"Address Line 2 :"}),Object(g.jsx)("input",{placeholder:"Address Line 2",onChange:j,name:"address2",type:"text"}),Object(g.jsx)("label",{htmlFor:"phone",children:"Phone :"}),Object(g.jsx)("input",{placeholder:"Mobile Number",onChange:j,name:"phone",type:"tel"}),Object(g.jsx)("button",{type:"submit",children:"Order Now"})]})})]})},ge=c(102),ve=c.n(ge),ke=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ye(){var e=ke(),t=_(),c=Object(o.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),d=l[0],b=l[1],u=Object(a.useState)(!1),h=Object(o.a)(u,2),O=h[0],x=h[1],p=pe((function(){x(!0),m.auth.createUserWithEmailAndPassword(f.email,f.password).then((function(e){e&&e.user.updateProfile({displayName:f.firstName+" "+f.lastName}).then((function(){b("User Created Login To Continue !"),x(!1)}))})).catch((function(e){s(e.message),x(!1)}))})),f=p.input,v=p.handleSubmit,k=p.handleInputChange;return Object(g.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(X.a,{}),Object(g.jsxs)("div",{className:e.paper,children:[Object(g.jsx)(Q.a,{className:e.avatar,children:Object(g.jsx)(se.a,{})}),Object(g.jsx)(ie.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(g.jsxs)("form",{className:e.form,onSubmit:v,noValidate:!0,children:[Object(g.jsxs)(ce.a,{container:!0,spacing:2,children:[Object(g.jsx)(ce.a,{item:!0,xs:12,sm:6,children:Object(g.jsx)(Z.a,{autoComplete:"fname",name:"firstName",variant:"outlined",onChange:k,required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(g.jsx)(ce.a,{item:!0,xs:12,sm:6,children:Object(g.jsx)(Z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",onChange:k,label:"Last Name",name:"lastName",autoComplete:"lname"})}),Object(g.jsx)(ce.a,{item:!0,xs:12,children:Object(g.jsx)(Z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",onChange:k,label:"Email Address",name:"email"})}),Object(g.jsx)(ce.a,{item:!0,xs:12,children:Object(g.jsx)(Z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",onChange:k,label:"Password",type:"password",id:"password"})})]}),O?Object(g.jsx)(ve.a,{color:"blue",loading:O,css:{display:"block",margin:"0 auto"},size:150}):Object(g.jsx)(K.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),n&&Object(g.jsx)(r.a,{severity:"error",children:n}),d&&Object(g.jsx)(r.a,{severity:"success",children:d}),Object(g.jsx)(ce.a,{container:!0,justify:"flex-end",children:Object(g.jsx)(ce.a,{item:!0,children:Object(g.jsx)(te.a,{href:"/sign",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(g.jsx)(ae.a,{mt:5,children:Object(g.jsx)(oe,{})})]})}c(150).config();var _e=function(){var e=G(),t=e.search,c=e.handleSearch,s=Object(a.useState)(!1),i=Object(o.a)(s,2),r=i[0],l=i[1],j=Object(a.useState)({}),d=Object(o.a)(j,2),b=d[0],u=d[1],h=Object(a.useState)([]),x=Object(o.a)(h,2),f=x[0],v=x[1],k=function(){l(!r)};Object(a.useEffect)((function(){null!=localStorage.getItem("user")&&(u(JSON.parse(localStorage.getItem("user"))),l(!0));var e=O.a.auth().onAuthStateChanged((function(e){e?(u(e),localStorage.setItem("user",JSON.stringify({email:e.email,uid:e.uid,refreshToken:e.refreshToken}))):(localStorage.removeItem("user"),l(!1),u({}),v([]))})),t=m.db.collection("cart").doc(b.email).onSnapshot((function(e){e.exists&&v(e.data().products)}));return function(){e(),t(),l(!1),u({}),v([])}}),[b.email]);var y=Y(b).dispatch;return Object(g.jsx)(M.a,{children:Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(S.d,{children:[Object(g.jsx)(S.b,{exact:!0,path:"/myaccount",children:Object(g.jsx)(p.Provider,{value:b,children:Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsx)(U,{cartLength:f.length,isCart:!0,search:t,setUser:u,handleAuth:k,handleSearch:c}),Object(g.jsx)(N,{})]})})}),Object(g.jsx)(S.b,{exact:!0,path:"/product/:bookId",children:Object(g.jsx)(p.Provider,{value:b,children:Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsx)(U,{cartLength:f.length,isCart:!0,search:t,setUser:u,handleAuth:k,handleSearch:c}),Object(g.jsx)(F,{})]})})}),Object(g.jsx)(S.b,{exact:!0,path:"/cart",children:b?Object(g.jsx)(p.Provider,{value:b,children:Object(g.jsx)(Oe,{isCart:!0,cartLength:f.length,search:t,setUser:u,handleAuth:k,handleSearch:c})}):Object(g.jsx)(S.a,{to:"/sign"})}),Object(g.jsx)(S.b,{exact:!0,path:"/",children:r?Object(g.jsx)(p.Provider,{value:b,children:Object(g.jsxs)(n.a.Fragment,{children:[Object(g.jsx)(U,{cartLength:f.length,isCart:!1,search:t,setUser:u,handleAuth:k,handleSearch:c}),Object(g.jsx)(H,{dispatch:y,search:t})]})}):Object(g.jsx)(S.a,{to:"/sign"})}),Object(g.jsx)(S.b,{exact:!0,path:"/sign",children:r?Object(g.jsx)(S.a,{to:"/"}):Object(g.jsx)(re,{handleAuth:k})}),Object(g.jsx)(S.b,{exact:!0,path:"/signup",children:Object(g.jsx)(ye,{})}),Object(g.jsx)(S.b,{exact:!0,path:"/checkout",children:Object(g.jsx)(fe,{cart:f})})]})})})};i.a.render(Object(g.jsx)(_e,{}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.44d37aa0.chunk.js.map